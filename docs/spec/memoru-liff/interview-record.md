# memoru-liff ヒアリング記録

**作成日**: 2026-01-05
**ヒアリング実施**: Step 4 既存情報ベースの差分ヒアリング

## ヒアリング目的

PRD（requirement.md）を確認し、不明点や曖昧な部分を明確化するためのヒアリングを実施しました。

---

## 質問と回答

### Q1: 作業規模の確認

**質問日時**: 2026-01-05
**カテゴリ**: 優先順位
**背景**: 要件定義書の詳細度を決定するため

**質問**: この要件の作業規模について教えてください

**回答**: フル機能開発（推奨）

**信頼性への影響**:

- 詳細なEARS要件定義、包括的なユーザーストーリー、完全な受け入れ基準を作成
- すべての要件に信頼性レベルを付与

---

### Q2: 既存コードベース分析の必要性

**質問日時**: 2026-01-05
**カテゴリ**: 既存設計確認
**背景**: プロジェクトが初期状態（requirement.mdのみ）のため確認

**質問**: 既存コードベースの詳細分析が必要ですか？

**回答**: 不要（推奨）- PRDのみで要件定義を作成

**信頼性への影響**:

- コードベースがないため、PRDベースの要件定義に集中
- 実装詳細は設計フェーズで決定

---

### Q3: SRS採点段階

**質問日時**: 2026-01-05
**カテゴリ**: 未定義部分詳細化
**背景**: PRDでは `grade=0|3|5` と記載されていたが、SM-2標準は0-5の6段階

**質問**: SRSの採点段階について教えてください

**回答**: 6段階（0-5）- SM-2標準

**信頼性への影響**:

- REQ-032 の信頼性レベルが 🟡 → 🔵 に向上
- SM-2アルゴリズムの標準実装が確定

---

### Q4: 復習通知の時間帯

**質問日時**: 2026-01-05
**カテゴリ**: 未定義部分詳細化
**背景**: PRDでは通知時間の設定方法が未定義

**質問**: 復習通知の時間帯について教えてください

**回答**: ユーザー設定可能

**信頼性への影響**:

- 新規要件 REQ-043 を追加（信頼性レベル: 🔵）
- ユーザー設定機能の実装が必要

---

### Q5: LLMモデル選定

**質問日時**: 2026-01-05
**カテゴリ**: 未定義部分詳細化
**背景**: PRDでは「AgentCore（Strands Agents）」とのみ記載、具体的なモデルは未指定

**質問**: カード生成に使用するLLMモデルを教えてください

**回答**: Amazon Bedrock

**信頼性への影響**:

- REQ-022 の信頼性レベルが 🔴 → 🔵 に向上
- Bedrock統合の実装方針が確定

---

### Q6: 入力テキスト制限

**質問日時**: 2026-01-05
**カテゴリ**: 未定義部分詳細化
**背景**: PRDでは入力制限が未定義、コスト・パフォーマンスへの影響があるため確認

**質問**: カード生成の入力テキストの最大文字数制限はどの程度が適切ですか？

**回答**: 2,000文字

**信頼性への影響**:

- 新規要件 REQ-023 を追加（信頼性レベル: 🔵）
- 境界値テストケース EDGE-102 を追加

---

### Q7: カード保存上限

**質問日時**: 2026-01-05
**カテゴリ**: 未定義部分詳細化
**背景**: PRDではカード数制限が未定義、DynamoDBコスト・パフォーマンスへの影響があるため確認

**質問**: ユーザーあたりのカード最大保存数はどの程度が適切ですか？

**回答**: 2,000枚

**信頼性への影響**:

- 新規要件 REQ-012 を追加（信頼性レベル: 🔵）
- 境界値テストケース EDGE-101 を追加

---

### Q8: MVP機能優先順位

**質問日時**: 2026-01-05
**カテゴリ**: 優先順位
**背景**: PRDでは実装ステップが記載されているが、MVPスコープが不明確

**質問**: MVP（最初のリリース）に含める機能を選択してください

**回答**: AIカード生成、LINE復習通知

**信頼性への影響**:

- REQ-021, REQ-041 が Must Have として確定
- カード手動作成、LINE回答機能は Phase 2 として整理

---

### Q9: AI生成失敗時の動作

**質問日時**: 2026-01-05
**カテゴリ**: 未定義部分詳細化
**背景**: PRDではエラーハンドリング方針が未定義

**質問**: AIカード生成失敗時の動作を教えてください

**回答**: エラー表示のみ（手動リトライを促す）

**信頼性への影響**:

- REQ-111 の信頼性レベルが 🟡 → 🔵 に向上
- 自動リトライは不要と確定

---

### Q10: レート制限の必要性

**質問日時**: 2026-01-05
**カテゴリ**: 追加要件
**背景**: PRDではレート制限が未定義、セキュリティ・コスト観点から確認

**質問**: レート制限（API呼び出し制限）は必要ですか？

**回答**: 必要

**信頼性への影響**:

- 新規要件 REQ-411 を追加（信頼性レベル: 🔵）
- API Gateway のスロットリング設定が必要

---

## ヒアリング結果サマリー

### 確認できた事項

- SRS採点は SM-2標準の6段階（0-5）を採用
- LLMモデルは Amazon Bedrock を使用
- 入力テキスト制限は 2,000文字
- カード保存上限は 2,000枚/ユーザー
- 復習通知時間はユーザー設定可能
- AI生成失敗時はエラー表示のみ（自動リトライなし）
- レート制限は必要

### 追加/変更要件

| 要件ID | 内容 | 種別 |
|--------|------|------|
| REQ-012 | カード最大2,000枚制限 | 追加 |
| REQ-022 | Amazon Bedrock使用 | 追加 |
| REQ-023 | 入力2,000文字制限 | 追加 |
| REQ-032 | 6段階採点（0-5） | 変更（3段階→6段階） |
| REQ-043 | 通知時間ユーザー設定 | 追加 |
| REQ-411 | レート制限 | 追加 |

### 残課題

- レート制限の具体的な数値（例: 1分あたり10リクエスト等）は設計フェーズで決定
- 通知時間設定のUI/UX詳細は設計フェーズで決定
- Bedrock使用モデル（Claude 3 Sonnet等）の選定は設計フェーズで決定

### 信頼性レベル分布

**ヒアリング前**:

- 🔵 青信号: 28件
- 🟡 黄信号: 18件
- 🔴 赤信号: 6件

**ヒアリング後**:

- 🔵 青信号: 38件 (+10)
- 🟡 黄信号: 12件 (-6)
- 🔴 赤信号: 2件 (-4)

---

## 関連文書

- **要件定義書**: [requirements.md](requirements.md)
- **ユーザストーリー**: [user-stories.md](user-stories.md)
- **受け入れ基準**: [acceptance-criteria.md](acceptance-criteria.md)
