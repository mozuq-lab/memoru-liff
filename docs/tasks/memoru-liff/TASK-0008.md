# TASK-0008: SM-2ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ãƒ»å¾©ç¿’APIå®Ÿè£…

**ã‚¿ã‚¹ã‚¯ID**: TASK-0008
**ã‚¿ã‚¹ã‚¯ã‚¿ã‚¤ãƒ—**: TDD
**æ¨å®šå·¥æ•°**: 8æ™‚é–“
**ãƒ•ã‚§ãƒ¼ã‚º**: Phase 2 - ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰å®Ÿè£…
**ä¿¡é ¼æ€§ãƒ¬ãƒ™ãƒ«**: ğŸ”µ *dataflow.mdãƒ»requirements.mdã‚ˆã‚Š*

## é–¢é€£æ–‡æ›¸
- **æ¦‚è¦**: [overview.md](overview.md)
- **è¦ä»¶å®šç¾©**: [requirements.md](../../spec/memoru-liff/requirements.md) - REQ-031, REQ-032, REQ-033, REQ-034, REQ-052, REQ-201
- **è¨­è¨ˆæ–‡æ›¸**: [architecture.md](../../design/memoru-liff/architecture.md)
- **APIä»•æ§˜**: [api-endpoints.md](../../design/memoru-liff/api-endpoints.md)
- **ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼**: [dataflow.md](../../design/memoru-liff/dataflow.md)

## ã‚¿ã‚¹ã‚¯æ¦‚è¦
é–“éš”åå¾©å­¦ç¿’ã®æ ¸ã¨ãªã‚‹SM-2ï¼ˆSuperMemo 2ï¼‰ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã‚’å®Ÿè£…ã—ã€å¾©ç¿’çµæœã®è¨˜éŒ²ã¨æ¬¡å›å¾©ç¿’æ—¥ã®è¨ˆç®—ã‚’è¡Œã†APIã‚’æä¾›ã™ã‚‹ã€‚ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å¾©ç¿’æˆç¸¾ï¼ˆgrade 0-5ï¼‰ã«åŸºã¥ã„ã¦ã€ease_factorã€intervalã€repetitionsã‚’æ›´æ–°ã™ã‚‹ã€‚

## ä¾å­˜ã‚¿ã‚¹ã‚¯
- **å‰æã‚¿ã‚¹ã‚¯**: TASK-0007ï¼ˆã‚«ãƒ¼ãƒ‰ç®¡ç†APIå®Ÿè£…ï¼‰
- **å¾Œç¶šã‚¿ã‚¹ã‚¯**: TASK-0010ï¼ˆLINE Webhookãƒ»Postbackå‡¦ç†å®Ÿè£…ï¼‰

## å®Œäº†æ¡ä»¶
- [ ] SM-2ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ å®Ÿè£…
- [ ] POST /reviews/:card_id å®Ÿè£…
- [ ] GET /cards/due å®Ÿè£…
- [ ] ease_factorä¸‹é™ï¼ˆ1.3ï¼‰ãƒã‚§ãƒƒã‚¯å®Ÿè£…
- [ ] å˜ä½“ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸80%ä»¥ä¸Š

---

## å®Ÿè£…è©³ç´°

### 1. SM-2ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ å®Ÿè£… ğŸ”µ
**ä¿¡é ¼æ€§**: ğŸ”µ *requirements.mdã‚ˆã‚Š*

SuperMemo 2ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã‚’Pythonã§å®Ÿè£…ã™ã‚‹ã€‚

**ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ æ¦‚è¦**:
```python
def calculate_sm2(grade: int, repetitions: int, ease_factor: float, interval: int) -> tuple:
    """
    SM-2ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã«ã‚ˆã‚‹æ¬¡å›å¾©ç¿’ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿è¨ˆç®—

    Args:
        grade: æ¡ç‚¹çµæœ (0-5)
        repetitions: ç¾åœ¨ã®æ­£è§£å›æ•°
        ease_factor: ç¾åœ¨ã®é›£æ˜“åº¦ä¿‚æ•°
        interval: ç¾åœ¨ã®å¾©ç¿’é–“éš”ï¼ˆæ—¥æ•°ï¼‰

    Returns:
        tuple: (new_repetitions, new_ease_factor, new_interval)
    """
    # grade 0-2: ä¸æ­£è§£ï¼ˆãƒªã‚»ãƒƒãƒˆï¼‰
    if grade < 3:
        new_repetitions = 0
        new_interval = 1
    else:
        # grade 3-5: æ­£è§£
        if repetitions == 0:
            new_interval = 1
        elif repetitions == 1:
            new_interval = 6
        else:
            new_interval = round(interval * ease_factor)
        new_repetitions = repetitions + 1

    # ease_factoræ›´æ–°ï¼ˆgrade 3ä»¥ä¸Šã§ã‚‚æ›´æ–°ï¼‰
    new_ease_factor = ease_factor + (0.1 - (5 - grade) * (0.08 + (5 - grade) * 0.02))

    # ease_factorä¸‹é™ãƒã‚§ãƒƒã‚¯
    if new_ease_factor < 1.3:
        new_ease_factor = 1.3

    return (new_repetitions, new_ease_factor, new_interval)
```

**gradeå®šç¾©**:
- 0: å®Œå…¨ã«å¿˜ã‚ŒãŸï¼ˆComplete blackoutï¼‰
- 1: é–“é•ãˆãŸï¼ˆIncorrect response; correct answer rememberedï¼‰
- 2: é–“é•ãˆãŸãŒã€è¦‹ã‚Œã°æ€ã„å‡ºã—ãŸï¼ˆIncorrect; correct answer seemed easy to recallï¼‰
- 3: æ­£è§£ã ãŒã€ã‹ãªã‚Šè‹¦åŠ´ã—ãŸï¼ˆCorrect with serious difficultyï¼‰
- 4: æ­£è§£ã€å°‘ã—è‹¦åŠ´ã—ãŸï¼ˆCorrect with some hesitationï¼‰
- 5: å®Œç’§ï¼ˆPerfect responseï¼‰

**å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«**: `backend/functions/api_main/services/srs.py`

### 2. POST /reviews/:card_id ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆå®Ÿè£… ğŸ”µ
**ä¿¡é ¼æ€§**: ğŸ”µ *api-endpoints.mdã‚ˆã‚Š*

å¾©ç¿’çµæœã‚’è¨˜éŒ²ã—ã€SM-2ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã§ã‚«ãƒ¼ãƒ‰ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æ›´æ–°ã™ã‚‹ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’å®Ÿè£…ã™ã‚‹ã€‚

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ**:
```json
{
  "grade": 4
}
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹**:
```json
{
  "card_id": "uuid-1",
  "grade": 4,
  "previous": {
    "ease_factor": 2.5,
    "interval": 1,
    "repetitions": 0,
    "due_date": "2024-01-01"
  },
  "updated": {
    "ease_factor": 2.6,
    "interval": 6,
    "repetitions": 1,
    "due_date": "2024-01-07"
  },
  "reviewed_at": "2024-01-01T12:00:00Z"
}
```

**å‡¦ç†ãƒ•ãƒ­ãƒ¼**:
1. JWTã‹ã‚‰user_idå–å¾—
2. card_idã®æ‰€æœ‰è€…ãƒã‚§ãƒƒã‚¯
3. gradeã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆ0-5ã®æ•´æ•°ï¼‰
4. SM-2ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã§æ–°ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿è¨ˆç®—
5. due_date = ä»Šæ—¥ + new_intervalæ—¥
6. DynamoDBã§ã‚«ãƒ¼ãƒ‰æ›´æ–°
7. å¾©ç¿’å±¥æ­´ã‚’review_historyã«è¿½åŠ 
8. ãƒ¬ã‚¹ãƒãƒ³ã‚¹è¿”å´

**å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«**: `backend/functions/api_main/handlers/reviews.py`

### 3. GET /cards/due ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆå®Ÿè£… ğŸ”µ
**ä¿¡é ¼æ€§**: ğŸ”µ *api-endpoints.mdã‚ˆã‚Š*

å¾©ç¿’æœŸé™ãŒåˆ°æ¥ã—ãŸã‚«ãƒ¼ãƒ‰ä¸€è¦§ã‚’å–å¾—ã™ã‚‹ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’å®Ÿè£…ã™ã‚‹ã€‚

**ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿**:
- `limit`: å–å¾—ä»¶æ•°ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 20ã€æœ€å¤§: 100ï¼‰
- `include_future`: æœªæ¥ã®æ—¥ä»˜ã‚‚å«ã‚ã‚‹ã‹ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: falseï¼‰

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹**:
```json
{
  "due_cards": [
    {
      "card_id": "uuid-1",
      "front": "å•é¡Œæ–‡1",
      "due_date": "2024-01-01",
      "overdue_days": 2
    }
  ],
  "total_due_count": 15,
  "next_due_date": "2024-01-03"
}
```

**ã‚¯ã‚¨ãƒªæ–¹å¼**:
- GSI `user_id-due_date-index` ã‚’ä½¿ç”¨
- due_date <= ä»Šæ—¥ï¼ˆUTCï¼‰ã§ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
- due_dateã®æ˜‡é †ï¼ˆå¤ã„ã‚‚ã®ã‹ã‚‰ï¼‰ã§ã‚½ãƒ¼ãƒˆ

**å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«**: `backend/functions/api_main/handlers/reviews.py`

### 4. ease_factorä¸‹é™ãƒã‚§ãƒƒã‚¯ ğŸ”µ
**ä¿¡é ¼æ€§**: ğŸ”µ *requirements.mdã‚ˆã‚Š*

SM-2ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã«ãŠã„ã¦ã€ease_factorãŒ1.3ã‚’ä¸‹å›ã‚‰ãªã„ã‚ˆã†ã«ã™ã‚‹åˆ¶é™ã‚’å®Ÿè£…ã™ã‚‹ã€‚

**ç†ç”±**: ease_factorãŒæ¥µç«¯ã«ä½ããªã‚‹ã¨ã€å¾©ç¿’é–“éš”ãŒçŸ­ããªã‚Šã™ãã¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“ãŒæ‚ªåŒ–ã™ã‚‹ãŸã‚ã€‚

**å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«**: `backend/functions/api_main/services/srs.py`

### 5. å¾©ç¿’å±¥æ­´ã®è¨˜éŒ² ğŸ”µ
**ä¿¡é ¼æ€§**: ğŸ”µ *dataflow.mdã‚ˆã‚Š*

å„å¾©ç¿’ã®gradeã¨æ—¥æ™‚ã‚’å±¥æ­´ã¨ã—ã¦ä¿å­˜ã—ã€å­¦ç¿’åˆ†æã«æ´»ç”¨ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ã€‚

**ãƒ‡ãƒ¼ã‚¿æ§‹é€ **:
```json
{
  "review_history": [
    {
      "reviewed_at": "2024-01-01T12:00:00Z",
      "grade": 4,
      "ease_factor_before": 2.5,
      "ease_factor_after": 2.6
    }
  ]
}
```

**æ³¨æ„**: å±¥æ­´ã¯æœ€æ–°100ä»¶ã¾ã§ä¿æŒï¼ˆå¤ã„ã‚‚ã®ã¯å‰Šé™¤ï¼‰

**å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«**: `backend/functions/api_main/services/srs.py`

---

## å˜ä½“ãƒ†ã‚¹ãƒˆè¦ä»¶

### ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹1: SM-2 grade=5ï¼ˆå®Œç’§ï¼‰ ğŸ”µ
**ä¿¡é ¼æ€§**: ğŸ”µ *requirements.mdã‚ˆã‚Š*
**Given**: ease_factor=2.5, interval=1, repetitions=0
**When**: grade=5ã§å¾©ç¿’
**Then**: repetitions=1, ease_factor=2.6, interval=1

### ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹2: SM-2 grade=4ï¼ˆå°‘ã—è‹¦åŠ´ï¼‰ ğŸ”µ
**ä¿¡é ¼æ€§**: ğŸ”µ *requirements.mdã‚ˆã‚Š*
**Given**: ease_factor=2.5, interval=6, repetitions=1
**When**: grade=4ã§å¾©ç¿’
**Then**: repetitions=2, ease_factor=2.5, interval=15

### ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹3: SM-2 grade=3ï¼ˆã‹ãªã‚Šè‹¦åŠ´ï¼‰ ğŸ”µ
**ä¿¡é ¼æ€§**: ğŸ”µ *requirements.mdã‚ˆã‚Š*
**Given**: ease_factor=2.5, interval=1, repetitions=0
**When**: grade=3ã§å¾©ç¿’
**Then**: repetitions=1, ease_factor=2.36, interval=1

### ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹4: SM-2 grade=2ï¼ˆä¸æ­£è§£ãƒ»ãƒªã‚»ãƒƒãƒˆï¼‰ ğŸ”µ
**ä¿¡é ¼æ€§**: ğŸ”µ *requirements.mdã‚ˆã‚Š*
**Given**: ease_factor=2.5, interval=15, repetitions=3
**When**: grade=2ã§å¾©ç¿’
**Then**: repetitions=0, interval=1ï¼ˆãƒªã‚»ãƒƒãƒˆï¼‰

### ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹5: SM-2 grade=0ï¼ˆå®Œå…¨å¿˜å´ãƒ»ãƒªã‚»ãƒƒãƒˆï¼‰ ğŸ”µ
**ä¿¡é ¼æ€§**: ğŸ”µ *requirements.mdã‚ˆã‚Š*
**Given**: ease_factor=2.5, interval=30, repetitions=5
**When**: grade=0ã§å¾©ç¿’
**Then**: repetitions=0, interval=1ï¼ˆãƒªã‚»ãƒƒãƒˆï¼‰

### ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹6: ease_factorä¸‹é™å¢ƒç•Œå€¤ï¼ˆ1.3ï¼‰ ğŸ”µ
**ä¿¡é ¼æ€§**: ğŸ”µ *requirements.mdã‚ˆã‚Š*
**Given**: ease_factor=1.3, interval=1, repetitions=0
**When**: grade=0ã§å¾©ç¿’ï¼ˆease_factorãŒã•ã‚‰ã«ä¸‹ãŒã‚‹è¨ˆç®—ï¼‰
**Then**: ease_factor=1.3ï¼ˆä¸‹é™ç¶­æŒï¼‰

### ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹7: ease_factorä¸‹é™è¶…éï¼ˆ1.29â†’1.3ï¼‰ ğŸ”µ
**ä¿¡é ¼æ€§**: ğŸ”µ *requirements.mdã‚ˆã‚Š*
**Given**: è¨ˆç®—çµæœãŒease_factor=1.29ã«ãªã‚‹ã‚±ãƒ¼ã‚¹
**When**: å¾©ç¿’å‡¦ç†å®Ÿè¡Œ
**Then**: ease_factor=1.3ã«è£œæ­£

### ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹8: å¾©ç¿’APIæˆåŠŸ ğŸ”µ
**ä¿¡é ¼æ€§**: ğŸ”µ *api-endpoints.mdã‚ˆã‚Š*
**Given**: èªè¨¼æ¸ˆã¿ãƒ¦ãƒ¼ã‚¶ãƒ¼ã€è‡ªèº«ã®ã‚«ãƒ¼ãƒ‰ã€æœ‰åŠ¹ãªgrade
**When**: POST /reviews/:card_id ã‚’å‘¼ã³å‡ºã™
**Then**: 200 OKã€ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒæ›´æ–°ã•ã‚Œã‚‹

### ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹9: å¾©ç¿’API - ç„¡åŠ¹ãªgradeï¼ˆ-1ï¼‰ ğŸ”µ
**ä¿¡é ¼æ€§**: ğŸ”µ *api-endpoints.mdã‚ˆã‚Š*
**Given**: èªè¨¼æ¸ˆã¿ãƒ¦ãƒ¼ã‚¶ãƒ¼ã€grade=-1
**When**: POST /reviews/:card_id ã‚’å‘¼ã³å‡ºã™
**Then**: 400 Bad Request

### ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹10: å¾©ç¿’API - ç„¡åŠ¹ãªgradeï¼ˆ6ï¼‰ ğŸ”µ
**ä¿¡é ¼æ€§**: ğŸ”µ *api-endpoints.mdã‚ˆã‚Š*
**Given**: èªè¨¼æ¸ˆã¿ãƒ¦ãƒ¼ã‚¶ãƒ¼ã€grade=6
**When**: POST /reviews/:card_id ã‚’å‘¼ã³å‡ºã™
**Then**: 400 Bad Request

### ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹11: å¾©ç¿’API - ä»–ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã‚«ãƒ¼ãƒ‰ ğŸ”µ
**ä¿¡é ¼æ€§**: ğŸ”µ *requirements.mdã‚ˆã‚Š*
**Given**: èªè¨¼æ¸ˆã¿ãƒ¦ãƒ¼ã‚¶ãƒ¼ã€ä»–ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã‚«ãƒ¼ãƒ‰ID
**When**: POST /reviews/:card_id ã‚’å‘¼ã³å‡ºã™
**Then**: 404 Not Found

### ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹12: æœŸé™ã‚«ãƒ¼ãƒ‰å–å¾—æˆåŠŸ ğŸ”µ
**ä¿¡é ¼æ€§**: ğŸ”µ *api-endpoints.mdã‚ˆã‚Š*
**Given**: èªè¨¼æ¸ˆã¿ãƒ¦ãƒ¼ã‚¶ãƒ¼ã€due_dateãŒä»Šæ—¥ä»¥å‰ã®ã‚«ãƒ¼ãƒ‰10æš
**When**: GET /cards/due ã‚’å‘¼ã³å‡ºã™
**Then**: 200 OKã€10æšã®ã‚«ãƒ¼ãƒ‰ãŒè¿”å´

### ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹13: æœŸé™ã‚«ãƒ¼ãƒ‰å–å¾— - æœŸé™ã‚«ãƒ¼ãƒ‰ãªã— ğŸ”µ
**ä¿¡é ¼æ€§**: ğŸ”µ *api-endpoints.mdã‚ˆã‚Š*
**Given**: èªè¨¼æ¸ˆã¿ãƒ¦ãƒ¼ã‚¶ãƒ¼ã€due_dateãŒã™ã¹ã¦æœªæ¥
**When**: GET /cards/due ã‚’å‘¼ã³å‡ºã™
**Then**: 200 OKã€ç©ºé…åˆ—ã€next_due_dateã«æœ€ã‚‚è¿‘ã„æ—¥ä»˜

### ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹14: due_dateè¨ˆç®—ã®æ­£ç¢ºæ€§ ğŸ”µ
**ä¿¡é ¼æ€§**: ğŸ”µ *dataflow.mdã‚ˆã‚Š*
**Given**: ä»Šæ—¥=2024-01-01ã€interval=7
**When**: å¾©ç¿’å‡¦ç†å®Ÿè¡Œ
**Then**: due_date=2024-01-08

---

## çµ±åˆãƒ†ã‚¹ãƒˆè¦ä»¶

### çµ±åˆãƒ†ã‚¹ãƒˆ1: æ–°è¦ã‚«ãƒ¼ãƒ‰ã®åˆå›å¾©ç¿’ãƒ•ãƒ­ãƒ¼ ğŸ”µ
**ä¿¡é ¼æ€§**: ğŸ”µ *dataflow.mdã‚ˆã‚Š*
**ãƒ†ã‚¹ãƒˆå†…å®¹**: ã‚«ãƒ¼ãƒ‰ä½œæˆï¼ˆåˆæœŸå€¤è¨­å®šï¼‰â†’ å¾©ç¿’ï¼ˆgrade=4ï¼‰â†’ ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿æ›´æ–°ã®ä¸€é€£ãƒ•ãƒ­ãƒ¼ãŒæ­£å¸¸ã«å‹•ä½œã™ã‚‹ã“ã¨ã‚’ç¢ºèª

### çµ±åˆãƒ†ã‚¹ãƒˆ2: é€£ç¶šå¾©ç¿’ã«ã‚ˆã‚‹intervalå¢—åŠ ç¢ºèª ğŸ”µ
**ä¿¡é ¼æ€§**: ğŸ”µ *requirements.mdã‚ˆã‚Š*
**ãƒ†ã‚¹ãƒˆå†…å®¹**: åŒä¸€ã‚«ãƒ¼ãƒ‰ã‚’grade=4ã§5å›é€£ç¶šå¾©ç¿’ã—ã€intervalãŒ1â†’6â†’15â†’...ã¨æ­£ã—ãå¢—åŠ ã™ã‚‹ã“ã¨ã‚’ç¢ºèª

### çµ±åˆãƒ†ã‚¹ãƒˆ3: å¾©ç¿’å¤±æ•—ã«ã‚ˆã‚‹ãƒªã‚»ãƒƒãƒˆç¢ºèª ğŸ”µ
**ä¿¡é ¼æ€§**: ğŸ”µ *requirements.mdã‚ˆã‚Š*
**ãƒ†ã‚¹ãƒˆå†…å®¹**: é«˜ã„repetitionsã®ã‚«ãƒ¼ãƒ‰ã‚’grade=2ã§å¾©ç¿’ã—ã€repetitions=0ã€interval=1ã«ãƒªã‚»ãƒƒãƒˆã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª

### çµ±åˆãƒ†ã‚¹ãƒˆ4: GET /cards/dueã¨ã®æ•´åˆæ€§ç¢ºèª ğŸ”µ
**ä¿¡é ¼æ€§**: ğŸ”µ *api-endpoints.mdã‚ˆã‚Š*
**ãƒ†ã‚¹ãƒˆå†…å®¹**: å¾©ç¿’å¾Œã«due_dateãŒæ›´æ–°ã•ã‚Œã€GET /cards/dueã®çµæœã‹ã‚‰è©²å½“ã‚«ãƒ¼ãƒ‰ãŒæ¶ˆãˆã‚‹ã“ã¨ã‚’ç¢ºèª

---

## å®Ÿè£…æ‰‹é †

### TDDã‚¿ã‚¹ã‚¯ã®å ´åˆ
1. `/tsumiki:tdd-requirements TASK-0008` - è©³ç´°è¦ä»¶å®šç¾©
2. `/tsumiki:tdd-testcases` - ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ä½œæˆ
3. `/tsumiki:tdd-red` - ãƒ†ã‚¹ãƒˆå®Ÿè£…ï¼ˆå¤±æ•—ï¼‰
4. `/tsumiki:tdd-green` - æœ€å°å®Ÿè£…
5. `/tsumiki:tdd-refactor` - ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°
6. `/tsumiki:tdd-verify-complete` - å“è³ªç¢ºèª

---

## æ³¨æ„äº‹é …
- SM-2ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®å®Ÿè£…ã¯å…¬é–‹ã•ã‚Œã¦ã„ã‚‹ä»•æ§˜ã«å³å¯†ã«å¾“ã†ã“ã¨
- due_dateã¯UTCæ—¥ä»˜ã§ä¿å­˜ã—ã€ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³å¤‰æ›ã¯ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ã§è¡Œã†
- å¾©ç¿’å±¥æ­´ã¯åˆ†æç”¨é€”ã®ãŸã‚ã€å‰Šé™¤ã—ãªã„ã“ã¨ï¼ˆä¸Šé™100ä»¶ã¯å¤ã„ã‚‚ã®ã‹ã‚‰å‰Šé™¤ï¼‰
- grade 3ã¯æ­£è§£æ‰±ã„ã ãŒã€ease_factorã¯ä¸‹ãŒã‚‹ãŸã‚æ³¨æ„
- intervalè¨ˆç®—æ™‚ã®ç«¯æ•°ã¯å››æ¨äº”å…¥ï¼ˆroundï¼‰ã§å‡¦ç†
- åŒã˜ã‚«ãƒ¼ãƒ‰ã®é€£ç¶šå¾©ç¿’ï¼ˆåŒæ—¥è¤‡æ•°å›ï¼‰ã¯è¨±å¯ã™ã‚‹ãŒã€intervalã¯æœ€å¾Œã®å¾©ç¿’åŸºæº–

---

## ä¿¡é ¼æ€§ãƒ¬ãƒ™ãƒ«ã‚µãƒãƒªãƒ¼
- ğŸ”µ **é’ä¿¡å·**: 18é …ç›®
- ğŸŸ¡ **é»„ä¿¡å·**: 0é …ç›®
- ğŸ”´ **èµ¤ä¿¡å·**: 0é …ç›®

**å“è³ªè©•ä¾¡**: é«˜å“è³ª
