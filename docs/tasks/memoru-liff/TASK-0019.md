# TASK-0019: LINEé€£æºç”»é¢

**ã‚¿ã‚¹ã‚¯ID**: TASK-0019
**ã‚¿ã‚¹ã‚¯ã‚¿ã‚¤ãƒ—**: TDD
**æ¨å®šå·¥æ•°**: 4æ™‚é–“
**ãƒ•ã‚§ãƒ¼ã‚º**: Phase 3 - ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å®Ÿè£…
**ä¿¡é ¼æ€§ãƒ¬ãƒ™ãƒ«**: ğŸ”µ *user-stories.md 1.2ã‚ˆã‚Š*

## é–¢é€£æ–‡æ›¸
- **æ¦‚è¦**: [overview.md](overview.md)
- **è¦ä»¶å®šç¾©**: [requirements.md](../../spec/memoru-liff/requirements.md) - REQ-003, REQ-202
- **è¨­è¨ˆæ–‡æ›¸**: [architecture.md](../../design/memoru-liff/architecture.md)

## ã‚¿ã‚¹ã‚¯æ¦‚è¦
LINEé€£æºã®çŠ¶æ…‹è¡¨ç¤ºã¨é€£æºå‡¦ç†ã‚’è¡Œã†ç”»é¢ã‚’å®Ÿè£…ã™ã‚‹ã€‚LIFF SDK getProfile()ã‚’ä½¿ç”¨ã—ã¦LINEãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’å–å¾—ã—ã€ã‚µãƒ¼ãƒãƒ¼ã¨é€£æºã™ã‚‹ã€‚

## ä¾å­˜ã‚¿ã‚¹ã‚¯
- **å‰æã‚¿ã‚¹ã‚¯**: TASK-0006ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼è¨­å®šAPIï¼‰, TASK-0014ï¼ˆãƒ›ãƒ¼ãƒ ç”»é¢ãƒ»ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰
- **å¾Œç¶šã‚¿ã‚¹ã‚¯**: ãªã—

## å®Œäº†æ¡ä»¶
- [ ] LINEé€£æºçŠ¶æ…‹è¡¨ç¤ºå®Ÿè£…
- [ ] LIFF SDK getProfile()å‘¼ã³å‡ºã—å®Ÿè£…
- [ ] é€£æºAPIãƒªã‚¯ã‚¨ã‚¹ãƒˆå®Ÿè£…
- [ ] å˜ä½“ãƒ†ã‚¹ãƒˆ80%ä»¥ä¸Šã®ã‚«ãƒãƒ¬ãƒƒã‚¸é”æˆ

---

## å®Ÿè£…è©³ç´°

### 1. LINEé€£æºç”»é¢ ğŸ”µ
**ä¿¡é ¼æ€§**: ğŸ”µ *user-stories.md 1.2ã‚ˆã‚Š*

LINEé€£æºã®çŠ¶æ…‹è¡¨ç¤ºã¨é€£æºå‡¦ç†ã‚’è¡Œã†ç”»é¢ã‚’å®Ÿè£…ã™ã‚‹ã€‚

```typescript
// frontend/src/pages/LinkLinePage.tsx
import { useState, useEffect, useCallback } from 'react';
import { useNavigate } from 'react-router-dom';
import { Loading } from '../components/common/Loading';
import { Error } from '../components/common/Error';
import { usersApi } from '../services/api';
import { getLiffProfile, initializeLiff } from '../services/liff';

interface LineStatus {
  isLinked: boolean;
  lineUserId?: string;
  displayName?: string;
  pictureUrl?: string;
}

export const LinkLinePage = () => {
  const navigate = useNavigate();
  const [lineStatus, setLineStatus] = useState<LineStatus | null>(null);
  const [isLoading, setIsLoading] = useState(true);
  const [isLinking, setIsLinking] = useState(false);
  const [isUnlinking, setIsUnlinking] = useState(false);
  const [error, setError] = useState<string | null>(null);
  const [successMessage, setSuccessMessage] = useState<string | null>(null);

  const fetchLineStatus = useCallback(async () => {
    setIsLoading(true);
    setError(null);

    try {
      const status = await usersApi.getLineStatus();
      setLineStatus(status);
    } catch (err) {
      setError('LINEé€£æºçŠ¶æ…‹ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ');
    } finally {
      setIsLoading(false);
    }
  }, []);

  useEffect(() => {
    fetchLineStatus();
  }, [fetchLineStatus]);

  useEffect(() => {
    if (successMessage) {
      const timer = setTimeout(() => setSuccessMessage(null), 3000);
      return () => clearTimeout(timer);
    }
  }, [successMessage]);

  const handleLinkLine = async () => {
    setIsLinking(true);
    setError(null);

    try {
      // LIFF SDKã‚’åˆæœŸåŒ–
      await initializeLiff();

      // LINEãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã‚’å–å¾—
      const profile = await getLiffProfile();

      // ã‚µãƒ¼ãƒãƒ¼ã«é€£æºãƒªã‚¯ã‚¨ã‚¹ãƒˆ
      await usersApi.linkLine({
        lineUserId: profile.userId,
        displayName: profile.displayName,
        pictureUrl: profile.pictureUrl,
      });

      setLineStatus({
        isLinked: true,
        lineUserId: profile.userId,
        displayName: profile.displayName,
        pictureUrl: profile.pictureUrl,
      });

      setSuccessMessage('LINEé€£æºãŒå®Œäº†ã—ã¾ã—ãŸ');
    } catch (err: any) {
      if (err.message?.includes('LIFF')) {
        setError('LINEã‚¢ãƒ—ãƒªã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ãã ã•ã„');
      } else {
        setError('LINEé€£æºã«å¤±æ•—ã—ã¾ã—ãŸ');
      }
    } finally {
      setIsLinking(false);
    }
  };

  const handleUnlinkLine = async () => {
    setIsUnlinking(true);
    setError(null);

    try {
      await usersApi.unlinkLine();

      setLineStatus({
        isLinked: false,
      });

      setSuccessMessage('LINEé€£æºã‚’è§£é™¤ã—ã¾ã—ãŸ');
    } catch (err) {
      setError('LINEé€£æºã®è§£é™¤ã«å¤±æ•—ã—ã¾ã—ãŸ');
    } finally {
      setIsUnlinking(false);
    }
  };

  if (isLoading) {
    return <Loading message="èª­ã¿è¾¼ã¿ä¸­..." />;
  }

  if (error && !lineStatus) {
    return <Error message={error} onRetry={fetchLineStatus} />;
  }

  return (
    <div className="pb-20">
      <header className="bg-white shadow-sm p-4 mb-4">
        <div className="flex items-center">
          <button
            onClick={() => navigate(-1)}
            className="flex items-center text-gray-600 hover:text-gray-800 min-w-[44px] min-h-[44px]"
          >
            <svg className="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 19l-7-7 7-7" />
            </svg>
            <span className="ml-1">æˆ»ã‚‹</span>
          </button>
        </div>
        <h1 className="text-xl font-bold text-gray-800 mt-2">LINEé€£æº</h1>
      </header>

      {/* æˆåŠŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ */}
      {successMessage && (
        <div className="mx-4 mb-4 p-3 bg-green-100 border border-green-300 text-green-700 rounded-lg">
          {successMessage}
        </div>
      )}

      {/* ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ */}
      {error && (
        <div className="mx-4 mb-4 p-3 bg-red-100 border border-red-300 text-red-700 rounded-lg">
          {error}
        </div>
      )}

      <div className="px-4">
        {/* LINEé€£æºçŠ¶æ…‹è¡¨ç¤º */}
        <section className="bg-white rounded-lg shadow p-6 mb-6">
          <div className="flex items-center mb-4">
            {/* LINE ã‚¢ã‚¤ã‚³ãƒ³ */}
            <div className="w-12 h-12 bg-line-green rounded-full flex items-center justify-center mr-4">
              <svg className="w-7 h-7 text-white" viewBox="0 0 24 24" fill="currentColor">
                <path d="M19.365 9.863c.349 0 .63.285.63.631 0 .345-.281.63-.63.63H17.61v1.125h1.755c.349 0 .63.283.63.63 0 .344-.281.629-.63.629h-2.386c-.345 0-.627-.285-.627-.629V8.108c0-.345.282-.63.627-.63h2.386c.349 0 .63.285.63.63 0 .349-.281.63-.63.63H17.61v1.125h1.755zm-3.855 3.016c0 .27-.174.51-.432.596-.064.021-.133.031-.199.031-.211 0-.391-.09-.51-.25l-2.443-3.317v2.94c0 .344-.279.629-.631.629-.346 0-.626-.285-.626-.629V8.108c0-.27.173-.51.43-.595.06-.023.136-.033.194-.033.195 0 .375.104.495.254l2.462 3.33V8.108c0-.345.282-.63.63-.63.345 0 .63.285.63.63v4.771zm-5.741 0c0 .344-.282.629-.631.629-.345 0-.627-.285-.627-.629V8.108c0-.345.282-.63.627-.63.349 0 .631.285.631.63v4.771zm-2.466.629H4.917c-.345 0-.63-.285-.63-.629V8.108c0-.345.285-.63.63-.63.349 0 .63.285.63.63v4.141h1.756c.348 0 .629.283.629.63 0 .344-.281.629-.629.629M24 10.314C24 4.943 18.615.572 12 .572S0 4.943 0 10.314c0 4.811 4.27 8.842 10.035 9.608.391.082.923.258 1.058.59.12.301.079.766.038 1.08l-.164 1.02c-.045.301-.24 1.186 1.049.645 1.291-.539 6.916-4.078 9.436-6.975C23.176 14.393 24 12.458 24 10.314" />
              </svg>
            </div>

            <div className="flex-1">
              <h2 className="text-lg font-semibold text-gray-800">
                LINEé€£æº
              </h2>
              <p className={`text-sm ${lineStatus?.isLinked ? 'text-green-600' : 'text-gray-500'}`}>
                {lineStatus?.isLinked ? 'é€£æºæ¸ˆã¿' : 'æœªé€£æº'}
              </p>
            </div>
          </div>

          {lineStatus?.isLinked ? (
            /* é€£æºæ¸ˆã¿çŠ¶æ…‹ */
            <div>
              <div className="flex items-center p-4 bg-gray-50 rounded-lg mb-4">
                {lineStatus.pictureUrl ? (
                  <img
                    src={lineStatus.pictureUrl}
                    alt="LINE ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«"
                    className="w-12 h-12 rounded-full mr-4"
                  />
                ) : (
                  <div className="w-12 h-12 bg-gray-300 rounded-full mr-4" />
                )}
                <div>
                  <p className="font-medium text-gray-800">
                    {lineStatus.displayName || 'LINEãƒ¦ãƒ¼ã‚¶ãƒ¼'}
                  </p>
                  <p className="text-sm text-gray-500">
                    {lineStatus.lineUserId}
                  </p>
                </div>
              </div>

              <p className="text-sm text-gray-600 mb-4">
                å¾©ç¿’ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼ãŒLINEã«é€ä¿¡ã•ã‚Œã¾ã™ã€‚
              </p>

              <button
                onClick={handleUnlinkLine}
                disabled={isUnlinking}
                className="w-full py-3 text-red-600 border border-red-600 rounded-lg hover:bg-red-50 min-h-[44px]"
              >
                {isUnlinking ? 'è§£é™¤ä¸­...' : 'é€£æºã‚’è§£é™¤'}
              </button>
            </div>
          ) : (
            /* æœªé€£æºçŠ¶æ…‹ */
            <div>
              <p className="text-gray-600 mb-4">
                LINEã¨é€£æºã™ã‚‹ã¨ã€å¾©ç¿’ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼ã‚’LINEã§å—ã‘å–ã‚Œã¾ã™ã€‚
              </p>

              <ul className="text-sm text-gray-600 mb-6 space-y-2">
                <li className="flex items-start">
                  <svg className="w-5 h-5 text-green-500 mr-2 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 13l4 4L19 7" />
                  </svg>
                  <span>æ¯æ—¥ã®å¾©ç¿’ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼ã‚’å—ä¿¡</span>
                </li>
                <li className="flex items-start">
                  <svg className="w-5 h-5 text-green-500 mr-2 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 13l4 4L19 7" />
                  </svg>
                  <span>LINEã‹ã‚‰ç›´æ¥ã‚¢ãƒ—ãƒªã«ã‚¢ã‚¯ã‚»ã‚¹</span>
                </li>
              </ul>

              <button
                onClick={handleLinkLine}
                disabled={isLinking}
                className={`w-full py-3 rounded-lg font-medium min-h-[44px] ${
                  isLinking
                    ? 'bg-gray-300 text-gray-500 cursor-not-allowed'
                    : 'bg-line-green text-white hover:bg-line-dark'
                }`}
              >
                {isLinking ? 'é€£æºä¸­...' : 'LINEã¨é€£æºã™ã‚‹'}
              </button>
            </div>
          )}
        </section>

        {/* æ³¨æ„äº‹é … */}
        <section className="bg-gray-50 rounded-lg p-4">
          <h3 className="text-sm font-medium text-gray-700 mb-2">æ³¨æ„äº‹é …</h3>
          <ul className="text-sm text-gray-600 space-y-1">
            <li>- é€£æºã«ã¯LINEã‚¢ãƒ—ãƒªãŒå¿…è¦ã§ã™</li>
            <li>- é€£æºã‚’è§£é™¤ã™ã‚‹ã¨é€šçŸ¥ãŒå±Šã‹ãªããªã‚Šã¾ã™</li>
            <li>- é€£æºæƒ…å ±ã¯å®‰å…¨ã«ä¿ç®¡ã•ã‚Œã¾ã™</li>
          </ul>
        </section>
      </div>
    </div>
  );
};
```

**å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«**: `frontend/src/pages/LinkLinePage.tsx`

### 2. LIFF SDKé€£æº ğŸ”µ
**ä¿¡é ¼æ€§**: ğŸ”µ *architecture.mdã‚ˆã‚Š*

LIFF SDKã‚’ä½¿ç”¨ã—ãŸãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«å–å¾—ã‚’å®Ÿè£…ã™ã‚‹ã€‚

```typescript
// frontend/src/services/liff.ts (è¿½åŠ )
import liff from '@line/liff';

export const initializeLiff = async (): Promise<void> => {
  if (!liff.isInClient()) {
    throw new Error('LIFF: LINEã‚¢ãƒ—ãƒªå†…ã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ãã ã•ã„');
  }

  await liff.init({ liffId: import.meta.env.VITE_LIFF_ID });

  if (!liff.isLoggedIn()) {
    liff.login();
    throw new Error('LIFF: ãƒ­ã‚°ã‚¤ãƒ³ãŒå¿…è¦ã§ã™');
  }
};

export interface LiffProfile {
  userId: string;
  displayName: string;
  pictureUrl?: string;
  statusMessage?: string;
}

export const getLiffProfile = async (): Promise<LiffProfile> => {
  const profile = await liff.getProfile();
  return {
    userId: profile.userId,
    displayName: profile.displayName,
    pictureUrl: profile.pictureUrl,
    statusMessage: profile.statusMessage,
  };
};

export const isInLiffClient = (): boolean => {
  return liff.isInClient();
};
```

**å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«**: `frontend/src/services/liff.ts`

### 3. APIé€£æºï¼ˆLINEé€£æºï¼‰ ğŸ”µ
**ä¿¡é ¼æ€§**: ğŸ”µ *architecture.mdã‚ˆã‚Š*

LINEé€£æºçŠ¶æ…‹ã®å–å¾—ãƒ»é€£æºãƒ»è§£é™¤ã®APIé€£æºã‚’å®Ÿè£…ã™ã‚‹ã€‚

```typescript
// frontend/src/services/api.ts (éƒ¨åˆ†)
interface LineStatus {
  isLinked: boolean;
  lineUserId?: string;
  displayName?: string;
  pictureUrl?: string;
}

interface LinkLineRequest {
  lineUserId: string;
  displayName: string;
  pictureUrl?: string;
}

export const usersApi = {
  // ... ä»–ã®ãƒ¡ã‚½ãƒƒãƒ‰

  getLineStatus: async (): Promise<LineStatus> => {
    const response = await apiClient.get<LineStatus>('/users/line-status');
    return response.data;
  },

  linkLine: async (data: LinkLineRequest): Promise<void> => {
    await apiClient.post('/users/link-line', data);
  },

  unlinkLine: async (): Promise<void> => {
    await apiClient.delete('/users/link-line');
  },
};
```

**å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«**: `frontend/src/services/api.ts`

---

## å˜ä½“ãƒ†ã‚¹ãƒˆè¦ä»¶

### ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹1: é€£æºçŠ¶æ…‹ã®è¡¨ç¤ºï¼ˆé€£æºæ¸ˆã¿ï¼‰ ğŸ”µ
**ä¿¡é ¼æ€§**: ğŸ”µ *user-stories.md 1.2ã‚ˆã‚Š*
**Given**: LINEã¨é€£æºæ¸ˆã¿ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼
**When**: LINEé€£æºç”»é¢ã«ã‚¢ã‚¯ã‚»ã‚¹
**Then**: ã€Œé€£æºæ¸ˆã¿ã€ã¨é€£æºå…ˆã®LINEãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ãŒè¡¨ç¤ºã•ã‚Œã‚‹

### ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹2: é€£æºçŠ¶æ…‹ã®è¡¨ç¤ºï¼ˆæœªé€£æºï¼‰ ğŸ”µ
**ä¿¡é ¼æ€§**: ğŸ”µ *user-stories.md 1.2ã‚ˆã‚Š*
**Given**: LINEã¨æœªé€£æºã®ãƒ¦ãƒ¼ã‚¶ãƒ¼
**When**: LINEé€£æºç”»é¢ã«ã‚¢ã‚¯ã‚»ã‚¹
**Then**: ã€Œæœªé€£æºã€ã¨é€£æºãƒœã‚¿ãƒ³ãŒè¡¨ç¤ºã•ã‚Œã‚‹

### ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹3: LINEé€£æºã®å®Ÿè¡Œ ğŸ”µ
**ä¿¡é ¼æ€§**: ğŸ”µ *REQ-003ã‚ˆã‚Š*
**Given**: æœªé€£æºçŠ¶æ…‹ã§é€£æºãƒœã‚¿ãƒ³ãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹
**When**: ã€ŒLINEã¨é€£æºã™ã‚‹ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
**Then**: LIFF SDKã§ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«å–å¾—å¾Œã€ã‚µãƒ¼ãƒãƒ¼ã«é€£æºãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒé€ä¿¡ã•ã‚Œã‚‹

### ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹4: LINEé€£æºæˆåŠŸæ™‚ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ ğŸŸ¡
**ä¿¡é ¼æ€§**: ğŸŸ¡ *è¦ä»¶ã‹ã‚‰å¦¥å½“ãªæ¨æ¸¬*
**Given**: LINEé€£æºå‡¦ç†ã‚’å®Ÿè¡Œ
**When**: é€£æºãŒæˆåŠŸ
**Then**: ã€ŒLINEé€£æºãŒå®Œäº†ã—ã¾ã—ãŸã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã‚‹

### ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹5: LINEé€£æºã®è§£é™¤ ğŸ”µ
**ä¿¡é ¼æ€§**: ğŸ”µ *REQ-202ã‚ˆã‚Š*
**Given**: é€£æºæ¸ˆã¿çŠ¶æ…‹ã§è§£é™¤ãƒœã‚¿ãƒ³ãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹
**When**: ã€Œé€£æºã‚’è§£é™¤ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
**Then**: ã‚µãƒ¼ãƒãƒ¼ã«è§£é™¤ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒé€ä¿¡ã•ã‚Œã€æœªé€£æºçŠ¶æ…‹ã«æˆ»ã‚‹

### ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹6: LIFFå¤–ã‹ã‚‰ã®ã‚¢ã‚¯ã‚»ã‚¹æ™‚ã®ã‚¨ãƒ©ãƒ¼ ğŸ”µ
**ä¿¡é ¼æ€§**: ğŸ”µ *architecture.mdã‚ˆã‚Š*
**Given**: LINEã‚¢ãƒ—ãƒªå¤–ã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹
**When**: é€£æºãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
**Then**: ã€ŒLINEã‚¢ãƒ—ãƒªã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ãã ã•ã„ã€ã‚¨ãƒ©ãƒ¼ãŒè¡¨ç¤ºã•ã‚Œã‚‹

### ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹7: é€£æºã‚¨ãƒ©ãƒ¼æ™‚ã®è¡¨ç¤º ğŸŸ¡
**ä¿¡é ¼æ€§**: ğŸŸ¡ *è¦ä»¶ã‹ã‚‰å¦¥å½“ãªæ¨æ¸¬*
**Given**: LINEé€£æºå‡¦ç†ã‚’å®Ÿè¡Œä¸­
**When**: ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿ
**Then**: ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã‚‹

---

## UI/UXè¦ä»¶

### ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°çŠ¶æ…‹ ğŸ”µ
**ä¿¡é ¼æ€§**: ğŸ”µ *NFR-201ã‚ˆã‚Š*
- çŠ¶æ…‹èª­ã¿è¾¼ã¿ä¸­ã¯ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚¹ãƒ”ãƒŠãƒ¼ã‚’è¡¨ç¤º
- é€£æºå‡¦ç†ä¸­ã¯ãƒœã‚¿ãƒ³ã«ã€Œé€£æºä¸­...ã€ã‚’è¡¨ç¤º

### é€£æºçŠ¶æ…‹è¡¨ç¤º ğŸ”µ
**ä¿¡é ¼æ€§**: ğŸ”µ *user-stories.md 1.2ã‚ˆã‚Š*
- é€£æºæ¸ˆã¿: ç·‘è‰²ã®ã€Œé€£æºæ¸ˆã¿ã€ãƒ©ãƒ™ãƒ« + ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«æƒ…å ±
- æœªé€£æº: ã‚°ãƒ¬ãƒ¼ã®ã€Œæœªé€£æºã€ãƒ©ãƒ™ãƒ« + é€£æºãƒœã‚¿ãƒ³

### ã‚¨ãƒ©ãƒ¼è¡¨ç¤º ğŸŸ¡
**ä¿¡é ¼æ€§**: ğŸŸ¡ *è¦ä»¶ã‹ã‚‰å¦¥å½“ãªæ¨æ¸¬*
- APIå–å¾—ã‚¨ãƒ©ãƒ¼æ™‚ã¯ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤º
- LIFFå¤–ã‚¢ã‚¯ã‚»ã‚¹æ™‚ã¯å°‚ç”¨ã®ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤º

### é€£æºæˆåŠŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ ğŸŸ¡
**ä¿¡é ¼æ€§**: ğŸŸ¡ *è¦ä»¶ã‹ã‚‰å¦¥å½“ãªæ¨æ¸¬*
- é€£æºæˆåŠŸæ™‚ã¯ç·‘è‰²ã®ãƒãƒŠãƒ¼ã‚’è¡¨ç¤º
- 3ç§’å¾Œã«è‡ªå‹•ã§éè¡¨ç¤º

### ãƒ¢ãƒã‚¤ãƒ«å¯¾å¿œ ğŸ”µ
**ä¿¡é ¼æ€§**: ğŸ”µ *NFR-201ã‚ˆã‚Š*
- LINEã®ç·‘è‰²ï¼ˆ#00B900ï¼‰ã‚’ãƒ–ãƒ©ãƒ³ãƒ‰ã‚«ãƒ©ãƒ¼ã¨ã—ã¦ä½¿ç”¨
- ãƒœã‚¿ãƒ³ã¯44pxä»¥ä¸Šã®ã‚¿ãƒƒãƒé ˜åŸŸ
- LINE WebViewæœ€é©åŒ–

---

## å®Ÿè£…æ‰‹é †

### TDDã‚¿ã‚¹ã‚¯ã®å ´åˆ
1. `/tsumiki:tdd-requirements TASK-0019` - è©³ç´°è¦ä»¶å®šç¾©
2. `/tsumiki:tdd-testcases` - ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ä½œæˆ
3. `/tsumiki:tdd-red` - ãƒ†ã‚¹ãƒˆå®Ÿè£…ï¼ˆå¤±æ•—ï¼‰
4. `/tsumiki:tdd-green` - æœ€å°å®Ÿè£…
5. `/tsumiki:tdd-refactor` - ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°
6. `/tsumiki:tdd-verify-complete` - å“è³ªç¢ºèª

---

## æ³¨æ„äº‹é …
- LINEé€£æºã¯LIFFå†…ï¼ˆLINE WebViewï¼‰ã‹ã‚‰ã®ã¿å®Ÿè¡Œå¯èƒ½
- é–‹ç™ºç’°å¢ƒã§ã¯LIFF Inspectorã‚’ä½¿ç”¨ã—ã¦ãƒ†ã‚¹ãƒˆ
- ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç”»åƒã®URLã¯å¤–éƒ¨URLã®ãŸã‚ã€CSPè¨­å®šã«æ³¨æ„
- é€£æºè§£é™¤å¾Œã‚‚æ—¢å­˜ã®é€šçŸ¥å±¥æ­´ã¯æ®‹ã‚‹

---

## ä¿¡é ¼æ€§ãƒ¬ãƒ™ãƒ«ã‚µãƒãƒªãƒ¼
- ğŸ”µ **é’ä¿¡å·**: 12é …ç›®
- ğŸŸ¡ **é»„ä¿¡å·**: 4é …ç›®
- ğŸ”´ **èµ¤ä¿¡å·**: 0é …ç›®

**å“è³ªè©•ä¾¡**: é«˜å“è³ª
