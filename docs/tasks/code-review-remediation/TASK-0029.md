# TASK-0029: C-07 環境変数バリデーション有効化

**タスクID**: TASK-0029
**タスクタイプ**: TDD
**推定工数**: 4時間
**フェーズ**: Phase 1 - Critical 修正
**信頼性レベル**: 🔵 *C-07: oidc.ts と main.tsx の実装から確認*

## 関連文書

- **概要**: [📋 overview.md](overview.md)
- **要件定義**: [📋 requirements.md](../../spec/code-review-remediation/requirements.md) - REQ-CR-006
- **設計文書**: [📐 architecture.md](../../design/code-review-remediation/architecture.md)
- **API仕様**: [🔌 api-endpoints.md](../../design/code-review-remediation/api-endpoints.md)

## タスク概要

frontend/src/main.tsx でアプリ起動前に validateOidcConfig() を呼び出し、OIDC 環境変数の不備を早期検出する。

## 依存タスク

- **前提タスク**: なし
- **後続タスク**: なし

## 完了条件

- [ ] main.tsx で validateOidcConfig() が呼ばれること
- [ ] 環境変数が不備の場合にエラーが表示されること
- [ ] 正常な環境変数の場合にアプリが起動すること
- [ ] テストがすべてパスすること
- [ ] 既存テストが壊れていないこと（回帰テスト）

---

## 実装詳細

1. 🔵 frontend/src/main.tsx に import を追加:

```typescript
import { validateOidcConfig } from './config/oidc';
```

2. 🔵 ReactDOM.createRoot の前に呼び出しを追加:

```typescript
validateOidcConfig();
```

---

## 単体テスト要件

- 🔵 validateOidcConfig が起動時に呼ばれることを確認
- 🟡 環境変数が欠落した場合のエラー表示確認

---

## 実装手順

### TDDタスクの場合
1. `/tsumiki:tdd-requirements TASK-0029` - 詳細要件定義
2. `/tsumiki:tdd-testcases` - テストケース作成
3. `/tsumiki:tdd-red` - テスト実装（失敗）
4. `/tsumiki:tdd-green` - 最小実装
5. `/tsumiki:tdd-refactor` - リファクタリング
6. `/tsumiki:tdd-verify-complete` - 品質確認

---

## 注意事項

- validateOidcConfig() は既に oidc.ts に実装済み
- 呼び出しが未実装だった問題を修正するのみ

---

## 信頼性レベルサマリー

| カテゴリ | 🔵 青 | 🟡 黄 | 🔴 赤 | 合計 |
|---------|-------|-------|-------|------|
| 実装詳細 | 2 | 0 | 0 | 2 |
| 単体テスト | 1 | 1 | 0 | 2 |

**品質評価**: 実装詳細はすべて🔵で明確。テストの🟡は環境変数欠落時のエラー表示確認に関するもので、実装時に確定可能。
