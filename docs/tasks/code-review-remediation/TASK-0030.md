# TASK-0030: H-01 datetimeçµ±ä¸€

**ã‚¿ã‚¹ã‚¯ID**: TASK-0030
**ã‚¿ã‚¹ã‚¯ã‚¿ã‚¤ãƒ—**: TDD
**æ¨å®šå·¥æ•°**: 4æ™‚é–“
**ãƒ•ã‚§ãƒ¼ã‚º**: Phase 2 - High ä¿®æ­£
**ä¿¡é ¼æ€§ãƒ¬ãƒ™ãƒ«**: ğŸ”µ *H-01: è¤‡æ•°ãƒ•ã‚¡ã‚¤ãƒ«ã®å®Ÿè£…ã‹ã‚‰ç¢ºèª*

## é–¢é€£æ–‡æ›¸

- **æ¦‚è¦**: [ğŸ“‹ overview.md](overview.md)
- **è¦ä»¶å®šç¾©**: [ğŸ“‹ requirements.md](../../spec/code-review-remediation/requirements.md) - REQ-CR-013
- **è¨­è¨ˆæ–‡æ›¸**: [ğŸ“ architecture.md](../../design/code-review-remediation/architecture.md)
- **APIä»•æ§˜**: [ğŸ”Œ api-endpoints.md](../../design/code-review-remediation/api-endpoints.md)

## ã‚¿ã‚¹ã‚¯æ¦‚è¦

å…¨ã¦ã® datetime å‡¦ç†ã§ timezone-aware ãª `datetime.now(timezone.utc)` ã‚’ä½¿ç”¨ã™ã‚‹ã‚ˆã†ã«çµ±ä¸€ã™ã‚‹ã€‚`datetime.utcnow()` ã®å‘¼ã³å‡ºã—ã‚’ã™ã¹ã¦ç½®æ›ã™ã‚‹ã€‚

## ä¾å­˜ã‚¿ã‚¹ã‚¯

- **å‰æã‚¿ã‚¹ã‚¯**: ãªã—
- **å¾Œç¶šã‚¿ã‚¹ã‚¯**: ãªã—

## å®Œäº†æ¡ä»¶

- [ ] `datetime.utcnow()` ãŒå…¨ã¦ `datetime.now(timezone.utc)` ã«ç½®æ›ã•ã‚Œã¦ã„ã‚‹ã“ã¨
- [ ] å…¨ã¦ã® datetime ãŒ timezone-aware ã§ã‚ã‚‹ã“ã¨
- [ ] ãƒ†ã‚¹ãƒˆãŒã™ã¹ã¦ãƒ‘ã‚¹ã™ã‚‹ã“ã¨
- [ ] æ—¢å­˜ãƒ†ã‚¹ãƒˆãŒå£Šã‚Œã¦ã„ãªã„ã“ã¨ï¼ˆå›å¸°ãƒ†ã‚¹ãƒˆï¼‰

---

## å®Ÿè£…è©³ç´°

1. ğŸ”µ backend/src/services/card_service.py:84 - `datetime.utcnow()` â†’ `datetime.now(timezone.utc)`
2. ğŸ”µ backend/src/services/srs.py:77 - `datetime.utcnow()` â†’ `datetime.now(timezone.utc)`
3. ğŸ”µ backend/src/services/review_service.py:290 - `datetime.utcnow()` â†’ `datetime.now(timezone.utc)`
4. ğŸ”µ backend/src/models/card.py:84 - `datetime.utcnow()` â†’ `datetime.now(timezone.utc)`
5. ğŸ”µ å„ãƒ•ã‚¡ã‚¤ãƒ«ã« `from datetime import datetime, timezone` ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆã‚’ç¢ºèª/è¿½åŠ 

---

## å˜ä½“ãƒ†ã‚¹ãƒˆè¦ä»¶

- ğŸ”µ datetime ãŒ timezone æƒ…å ±ã‚’æŒã£ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã™ã‚‹ãƒ†ã‚¹ãƒˆ
- ğŸŸ¡ UTC æ—¥ä»˜å¢ƒç•Œã§ã® due è¨ˆç®—ãƒ†ã‚¹ãƒˆ (EDGE-CR-102)

---

## å®Ÿè£…æ‰‹é †

### TDDã‚¿ã‚¹ã‚¯ã®å ´åˆ
1. `/tsumiki:tdd-requirements TASK-0030` - è©³ç´°è¦ä»¶å®šç¾©
2. `/tsumiki:tdd-testcases` - ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ä½œæˆ
3. `/tsumiki:tdd-red` - ãƒ†ã‚¹ãƒˆå®Ÿè£…ï¼ˆå¤±æ•—ï¼‰
4. `/tsumiki:tdd-green` - æœ€å°å®Ÿè£…
5. `/tsumiki:tdd-refactor` - ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°
6. `/tsumiki:tdd-verify-complete` - å“è³ªç¢ºèª

---

## æ³¨æ„äº‹é …

- `datetime.utcnow()` ã¯ Python 3.12 ã§éæ¨å¥¨
- grep ã§ä»–ã« `utcnow()` ãŒãªã„ã‹å…¨ä½“æ¤œç´¢ãŒå¿…è¦

---

## ä¿¡é ¼æ€§ãƒ¬ãƒ™ãƒ«ã‚µãƒãƒªãƒ¼

| ã‚«ãƒ†ã‚´ãƒª | ğŸ”µ é’ | ğŸŸ¡ é»„ | ğŸ”´ èµ¤ | åˆè¨ˆ |
|---------|-------|-------|-------|------|
| å®Ÿè£…è©³ç´° | 5 | 0 | 0 | 5 |
| å˜ä½“ãƒ†ã‚¹ãƒˆ | 1 | 1 | 0 | 2 |

**å“è³ªè©•ä¾¡**: é«˜å“è³ªã€‚å®Ÿè£…ç®‡æ‰€ã¯å…¨ã¦ç¢ºèªæ¸ˆã¿ã€‚UTCæ—¥ä»˜å¢ƒç•Œãƒ†ã‚¹ãƒˆã®ã¿è¦è¨­è¨ˆã€‚
